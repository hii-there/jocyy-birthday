<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy 26th Birthday, Dear!</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700&family=Pacifico&family=Caveat:wght@700&family=Indie+Flower&display=swap" rel="stylesheet">
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --primary: #ff9a9e;
            --secondary: #fad0c4;
            --accent: #fbc2eb;
            --deep-pink: #ff6b81;
            --text: #555;
            --white: #ffffff;
            --bg-pattern: url('data:image/svg+xml,%3Csvg width="52" height="26" viewBox="0 0 52 26" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23fad0c4" fill-opacity="0.4"%3E%3Cpath d="M10 10c0-2.21-1.79-4-4-4-2.21 0-4 1.79-4 4s1.79 4 4 4c2.21 0 4-1.79 4-4zm-4-2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm36 0c0-2.21-1.79-4-4-4-2.21 0-4 1.79-4 4s1.79 4 4 4c2.21 0 4-1.79 4-4zm-4-2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm10 14c0-2.21-1.79-4-4-4-2.21 0-4 1.79-4 4s1.79 4 4 4c2.21 0 4-1.79 4-4zm-4-2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM26 10c0-2.21-1.79-4-4-4-2.21 0-4 1.79-4 4s1.79 4 4 4c2.21 0 4-1.79 4-4zm-4-2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm-4 14c0-2.21-1.79-4-4-4-2.21 0-4 1.79-4 4s1.79 4 4 4c2.21 0 4-1.79 4-4zm-4-2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            width: 100%; height: 100%; overflow: hidden; position: fixed;
            touch-action: none; overscroll-behavior: none;
            font-family: 'Nunito', sans-serif;
            background-color: #fff0f5; background-image: var(--bg-pattern); color: var(--text);
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 154, 158, 0.5); border-radius: 10px; }

        /* --- Animations --- */
        @keyframes pop-in { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        @keyframes zoom-in { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        @keyframes slide-up-smooth { 0% { transform: translateY(50px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
        @keyframes rotate-fade { 0% { transform: rotate(-10deg) scale(0.8); opacity: 0; } 100% { transform: rotate(0) scale(1); opacity: 1; } }
        @keyframes exit-fade { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(1.1); filter: blur(5px); } }
        @keyframes zoom-in-up { 0% { opacity: 0; transform: scale(0.8) translateY(50px); } 100% { opacity: 1; transform: scale(1) translateY(0); } }
        @keyframes float-kiss { 0% { transform: translateY(0) scale(0.5); opacity: 0; } 20% { opacity: 1; transform: translateY(-20px) scale(1.2); } 100% { transform: translateY(-100vh) scale(1); opacity: 0; } }
        @keyframes star-fall { 0% { transform: translateY(-10vh) translateX(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(110vh) translateX(20px) rotate(360deg); opacity: 0; } }
        @keyframes rise-fade { 0% { transform: translateY(0) scale(0.8); opacity: 0; } 30% { opacity: 0.8; } 100% { transform: translateY(-100px) scale(1.1); opacity: 0; } }
        @keyframes pulse-beat { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes wiggle { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        @keyframes float-up { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        /* --- BACKGROUND & FLOATING ELEMENTS --- */
        .bg-floater-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1; overflow: hidden;
        }

        /* 1. Kupu-kupu (Elegant Zig-Zag) */
        .butterfly {
            position: absolute; bottom: -50px; left: 20%;
            font-size: 2.5rem; opacity: 0; z-index: 2;
            animation: butterfly-fly 15s linear infinite;
        }
        @keyframes butterfly-fly {
            0% { transform: translate(0, 0) rotate(0deg) scale(0.8); opacity: 0; }
            10% { opacity: 1; }
            25% { transform: translate(40px, -25vh) rotate(15deg) scale(1); }
            50% { transform: translate(-40px, -50vh) rotate(-15deg) scale(0.9); }
            75% { transform: translate(40px, -75vh) rotate(10deg) scale(1); }
            90% { opacity: 1; }
            100% { transform: translate(0, -110vh) rotate(0deg) scale(0.8); opacity: 0; }
        }

        /* 2. Middle Floaters (Max 4, Elegant Rise) */
        .bg-floater-mid {
            position: absolute; opacity: 0;
            animation: rise-mid-float 8s ease-in-out infinite;
        }
        @keyframes rise-mid-float {
            0% { transform: translateY(20px); opacity: 0; }
            20% { opacity: 0.8; }
            80% { opacity: 0.8; }
            100% { transform: translateY(-100px); opacity: 0; }
        }
        /* Hanya 4 Posisi Spesifik */
        .bg-floater-mid:nth-child(1) { top: 20%; left: 15%; animation-delay: 0s; font-size: 2rem; }
        .bg-floater-mid:nth-child(2) { top: 30%; right: 15%; animation-delay: 2s; font-size: 1.8rem; }
        .bg-floater-mid:nth-child(3) { top: 60%; left: 10%; animation-delay: 4s; font-size: 1.5rem; }
        .bg-floater-mid:nth-child(4) { top: 70%; right: 10%; animation-delay: 1s; font-size: 2.2rem; }

        /* 3. Bottom Floaters (Many, 1/6 Screen) */
        .bg-floater-bottom {
            position: absolute; bottom: -30px; opacity: 0;
            animation: float-fade-bottom 6s linear infinite;
        }
        @keyframes float-fade-bottom {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            20% { opacity: 0.7; }
            100% { transform: translateY(-20vh) scale(1.2) rotate(20deg); opacity: 0; } /* Max 20vh height (~1/5 screen) */
        }
        
        /* Generating random delays and positions for bottom floaters via CSS n-th child would be long, 
           so I'll use a mix of defined classes below or just list them */
        .bg-floater-bottom:nth-of-type(5) { left: 5%; animation-duration: 5s; animation-delay: 0s; font-size: 1.2rem; }
        .bg-floater-bottom:nth-of-type(6) { left: 12%; animation-duration: 7s; animation-delay: 1s; font-size: 1.5rem; }
        .bg-floater-bottom:nth-of-type(7) { left: 20%; animation-duration: 6s; animation-delay: 3s; font-size: 1rem; }
        .bg-floater-bottom:nth-of-type(8) { left: 28%; animation-duration: 8s; animation-delay: 0.5s; font-size: 1.8rem; }
        .bg-floater-bottom:nth-of-type(9) { left: 35%; animation-duration: 5.5s; animation-delay: 2s; font-size: 1.3rem; }
        .bg-floater-bottom:nth-of-type(10) { left: 42%; animation-duration: 7.5s; animation-delay: 4s; font-size: 1.6rem; }
        .bg-floater-bottom:nth-of-type(11) { left: 50%; animation-duration: 6.5s; animation-delay: 1.5s; font-size: 1.4rem; }
        .bg-floater-bottom:nth-of-type(12) { left: 58%; animation-duration: 5s; animation-delay: 0.2s; font-size: 1.9rem; }
        .bg-floater-bottom:nth-of-type(13) { left: 65%; animation-duration: 8s; animation-delay: 2.5s; font-size: 1.1rem; }
        .bg-floater-bottom:nth-of-type(14) { left: 72%; animation-duration: 6s; animation-delay: 5s; font-size: 1.5rem; }
        .bg-floater-bottom:nth-of-type(15) { left: 80%; animation-duration: 7s; animation-delay: 1s; font-size: 1.2rem; }
        .bg-floater-bottom:nth-of-type(16) { left: 88%; animation-duration: 5.5s; animation-delay: 3.5s; font-size: 1.7rem; }
        .bg-floater-bottom:nth-of-type(17) { left: 95%; animation-duration: 8.5s; animation-delay: 0.8s; font-size: 1.3rem; }
        .bg-floater-bottom:nth-of-type(18) { left: 15%; animation-duration: 6.2s; animation-delay: 4.5s; font-size: 1.6rem; }
        .bg-floater-bottom:nth-of-type(19) { left: 55%; animation-duration: 7.2s; animation-delay: 2.2s; font-size: 1.4rem; }
        .bg-floater-bottom:nth-of-type(20) { left: 85%; animation-duration: 5.8s; animation-delay: 1.8s; font-size: 1.8rem; }


        /* UI Components */
        .btn-main {
            padding: 12px 30px; background: linear-gradient(45deg, var(--primary), var(--deep-pink));
            color: var(--white); border: none; border-radius: 50px;
            font-size: 1.1rem; font-weight: 700; font-family: 'Fredoka One', cursive;
            cursor: pointer; box-shadow: 0 5px 15px rgba(255, 107, 129, 0.3);
            display: inline-flex; align-items: center; gap: 8px;
            transition: transform 0.2s; z-index: 20; user-select: none;
        }
        .btn-main:active { transform: scale(0.95); }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(255, 107, 129, 0.4); }

        .slide-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; padding: 20px;
            transition: opacity 0.8s ease-in-out;
        }
        .slide-container.active { opacity: 1; pointer-events: all; z-index: 10; }
        .slide-container.exit { animation: exit-fade 0.8s forwards; pointer-events: none; }

        /* --- Section Entrance Animations --- */
        #section-1.active > * { animation: pop-in 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        #section-2.active > * { animation: slide-up-smooth 1s ease-out forwards; animation-delay: 0.2s; opacity: 0; }
        #section-3.active > * { animation: pop-in 1s ease-out forwards; animation-delay: 0.2s; opacity: 0; }
        #section-4.active > * { animation: zoom-in 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; animation-delay: 0.2s; opacity: 0; }
        
        /* Section 5 (Special Wish) */
        #section-5.active h2, #section-5.active p { animation: slide-up-smooth 1s ease-out forwards; animation-delay: 0.2s; opacity: 0; }
        #section-5.active .special-photo-container { animation: zoom-in-up 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; animation-delay: 0.4s; opacity: 0; }
        #section-5.active .btn-main { animation: pop-in 1s ease-out forwards; animation-delay: 0.8s; opacity: 0; }

        /* Section 6 (Gallery) */
        #section-6.active h2, #section-6.active .gallery-hint { animation: slide-up-smooth 1s ease-out forwards; animation-delay: 0.2s; opacity: 0; }
        #section-6.active .gallery-item { opacity: 0; animation: slide-up-smooth 1s ease-out forwards; }
        #section-6.active .gallery-item:nth-child(1) { animation-delay: 0.4s; }
        #section-6.active .gallery-item:nth-child(2) { animation-delay: 0.9s; }
        #section-6.active .gallery-item:nth-child(3) { animation-delay: 1.4s; }
        #section-6.active .gallery-item:nth-child(4) { animation-delay: 1.9s; }
        #section-6.active .gallery-item:nth-child(5) { animation-delay: 2.4s; }
        #section-6.active .gallery-item:nth-child(6) { animation-delay: 2.9s; }
        #section-6.active .nav-btn { animation: pop-in 1s ease-out forwards; animation-delay: 3.2s; opacity: 0; }

        /* Section 7 (Wishes) */
        #section-7.active .wishes-container .flip-card { opacity: 0; animation: zoom-in-up 0.8s ease-out forwards; }
        #section-7.active .wishes-container .flip-card:nth-child(1) { animation-delay: 0.2s; }
        #section-7.active .wishes-container .flip-card:nth-child(2) { animation-delay: 0.6s; }
        #section-7.active .wishes-container .flip-card:nth-child(3) { animation-delay: 1.0s; }
        
        #section-8.active > * { animation: slide-up-smooth 1s ease-out forwards; animation-delay: 0.2s; opacity: 0; }
        #section-9.active > * { animation: pop-in 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

        /* --- STYLES FOR SECTIONS --- */
        .cover-frame {
            background: #fff; padding: 15px 15px 50px 15px; box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            transform: rotate(-3deg); margin-bottom: 20px; width: 260px; animation: float-up 3s infinite ease-in-out;
            position: relative; border-radius: 5px;
        }
        .cover-frame img { width: 100%; height: auto; border-radius: 3px; display: block; aspect-ratio: 3/4; object-fit: cover; }
        .cover-frame::after { content: 'Birthday Girl ‚ô•'; position: absolute; bottom: 15px; left: 0; width: 100%; text-align: center; font-family: 'Pacifico', cursive; color: #555; font-size: 1.2rem; }
        h1 { font-family: 'Fredoka One'; color: var(--deep-pink); font-size: 2.8rem; text-shadow: 2px 2px #fff; margin-bottom: 5px; text-align: center; }
        .sub-title { font-size: 1.1rem; color: var(--text); background: rgba(255,255,255,0.8); padding: 5px 15px; border-radius: 20px; margin-bottom: 30px; font-weight: 700; }
        .sticker { position: absolute; font-size: 2.5rem; z-index: 2; filter: drop-shadow(2px 2px 0 rgba(0,0,0,0.1)); }

        .envelope-wrapper {
            position: relative; width: 280px; height: 180px; background: var(--primary); border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15); display: flex; justify-content: center; align-items: flex-end;
            cursor: pointer; transition: transform 0.3s;
        }
        .envelope-wrapper:hover { transform: scale(1.05); }
        .envelope-flap {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 140px solid transparent; border-right: 140px solid transparent;
            border-top: 100px solid #ffb7b2; transform-origin: top; transition: transform 0.6s; z-index: 5;
        }
        .envelope-wrapper.open .envelope-flap { transform: rotateX(180deg); z-index: 1; }
        .envelope-paper {
            position: absolute; bottom: 10px; left: 10%; width: 80%; height: 80%; background: #fff; border-radius: 5px;
            transition: transform 0.6s 0.2s; display: flex; justify-content: center; align-items: center;
            font-family: 'Pacifico'; color: var(--deep-pink); font-size: 1.5rem; box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
        }
        .envelope-wrapper.open .envelope-paper { transform: translateY(-100px); z-index: 4; }

        .letter-paper {
            background: #fffdf5; padding: 30px; width: 90%; max-width: 450px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); position: relative;
            background-image: radial-gradient(#ddd 1px, transparent 1px); background-size: 20px 20px;
            border: 1px solid #fff; transform: rotate(1deg);
        }
        .letter-paper::before {
            content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 120px; height: 35px; background: rgba(255, 154, 158, 0.5); transform: rotate(-2deg);
        }
        .letter-content h2 { font-family: 'Pacifico'; color: var(--deep-pink); margin-bottom: 15px; font-size: 1.8rem; }
        .letter-content p { font-size: 1.05rem; line-height: 1.7; color: #555; }

        .cake-wrapper { position: relative; width: 280px; height: 280px; display: flex; justify-content: center; align-items: flex-end; margin-bottom: 40px; cursor: pointer; }
        .cake-body { position: relative; width: 200px; height: 140px; display: flex; justify-content: center; z-index: 2; }
        .cake-half { width: 50%; height: 100%; background: #FFC0CB; position: relative; transition: transform 1s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s; }
        .cake-half.left { border-radius: 20px 0 0 20px; background: radial-gradient(circle at 20% 20%, #FFE4E1 10%, #FFC0CB 15%); }
        .cake-half.right { border-radius: 0 20px 20px 0; background: radial-gradient(circle at 80% 20%, #FFE4E1 10%, #FFC0CB 15%); }
        .icing { position: absolute; top: -25px; width: 100%; height: 50px; background: #FFF5F5; border-radius: 50px; z-index: 2; box-shadow: 0 5px 10px rgba(0,0,0,0.05); }
        .cake-half.left .icing { border-radius: 30px 0 0 30px; left: -5px; width: 105%; }
        .cake-half.right .icing { border-radius: 0 30px 30px 0; right: -5px; width: 105%; }
        .strawberry { width: 28px; height: 34px; background: #FF6B81; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; position: absolute; top: -35px; z-index: 3; box-shadow: inset -2px -2px 5px rgba(0,0,0,0.2); }
        .cake-half.left .strawberry { left: 25px; transform: rotate(-15deg); }
        .cake-half.right .strawberry { right: 25px; transform: rotate(15deg); }
        .candle {
            position: absolute; bottom: 135px; left: 50%; transform: translateX(-50%); width: 14px; height: 75px; 
            background: repeating-linear-gradient(45deg, #FFF, #FFF 8px, #A18CD1 8px, #A18CD1 16px);
            border-radius: 6px; z-index: 1; transition: opacity 0.5s; box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        .flame {
            position: absolute; top: -22px; left: 50%; transform: translateX(-50%); width: 16px; height: 24px;
            background: radial-gradient(ellipse at bottom, #FFD700 0%, #FF8C00 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; animation: flicker 1s infinite alternate; box-shadow: 0 0 20px #FFD700;
        }
        @keyframes flicker { 0% { transform: translateX(-50%) scale(1) rotate(-2deg); opacity: 0.9; } 50% { transform: translateX(-50%) scale(1.1) rotate(2deg); opacity: 1; } 100% { transform: translateX(-50%) scale(0.9) rotate(-1deg); opacity: 0.8; } }
        .knife {
            position: absolute; bottom: 170px; left: 50%; transform: translateX(-50%); font-size: 4rem; z-index: 10;
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1); pointer-events: none; animation: float-up 2s infinite ease-in-out;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2));
        }
        .cake-wrapper.cut .cake-half.left { transform: translateX(-40px) rotate(-10deg); }
        .cake-wrapper.cut .cake-half.right { transform: translateX(40px) rotate(10deg); }
        .cake-wrapper.cut .candle { opacity: 0; transform: translateX(-50%) translateY(50px) scale(0); }
        .cake-wrapper.cut .knife { bottom: 60px; opacity: 0; transform: translateX(-50%) rotate(-90deg) scale(0.5); }

        .special-photo-container {
            width: 300px; padding: 10px; background: #fff; border-radius: 15px;
            box-shadow: 0 15px 35px rgba(255, 154, 158, 0.4); transform: rotate(-1deg);
            margin-bottom: 30px;
        }
        .special-photo-container img { width: 100%; height: auto; aspect-ratio: 4/3; object-fit: cover; border-radius: 10px; display: block; }
        
        .floating-elements {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; overflow: hidden;
        }
        
        .falling-star { position: absolute; top: -50px; font-size: 2rem; opacity: 0; animation: star-fall 3s linear infinite; }
        .rising-heart { position: absolute; bottom: -50px; font-size: 2rem; opacity: 0; animation: rise-fade 4s ease-in-out infinite; }

        .gallery-container {
            width: 100%; height: 70vh; overflow-y: auto; padding: 10px 20px;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 15px; align-content: start; touch-action: pan-y;
        }
        .gallery-item {
            background: #fff; padding: 8px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer; transition: transform 0.3s; position: relative; height: 180px;
        }
        .gallery-item:hover { transform: scale(1.05); z-index: 5; }
        .gallery-item:nth-child(odd) { transform: rotate(2deg); }
        .gallery-item:nth-child(even) { transform: rotate(-2deg); }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; border-radius: 8px; }
        .gallery-hint { margin-bottom: 10px; font-family: 'Caveat', cursive; font-size: 1.5rem; color: var(--deep-pink); animation: pulse-beat 1.5s infinite; text-align: center; }

        .wishes-container {
            display: flex; flex-direction: column; gap: 20px; width: 100%; max-width: 350px;
            height: 65vh; overflow-y: auto; padding: 10px; touch-action: pan-y; padding-bottom: 50px;
        }
        .flip-card { background-color: transparent; width: 100%; height: 120px; perspective: 1000px; cursor: pointer; margin-bottom: 10px; }
        .flip-card-inner {
            position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15); border-radius: 15px;
        }
        .flip-card.flipped .flip-card-inner { transform: rotateX(180deg); }
        .flip-card-front, .flip-card-back {
            position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 15px; overflow: hidden;
        }
        .flip-card-front { background: #fff; padding: 0; border: none; }
        .flip-card-front img { width: 100%; height: 100%; object-fit: cover; }
        .flip-card-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4);
            display: flex; justify-content: center; align-items: center;
        }
        .flip-card-title { color: #fff; font-family: 'Fredoka One'; font-size: 1.4rem; letter-spacing: 1px; text-shadow: 2px 2px 4px rgba(0,0,0,0.6); display: flex; align-items: center; gap: 8px; }
        .flip-card-back {
            background: var(--primary); color: white; transform: rotateX(180deg);
            font-family: 'Nunito'; font-size: 1rem; font-weight: 600; display: flex; align-items: center; justify-content: center; padding: 15px;
        }
        
        .wishes-progress-container { width: 100%; background-color: #eee; border-radius: 10px; height: 10px; margin-top: 20px; overflow: hidden; }
        .wishes-progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--deep-pink), var(--primary)); border-radius: 10px; transition: width 0.5s ease-in-out; }

        .long-letter-container {
            width: 90%; max-width: 500px; height: 75vh; overflow-y: auto;
            background: #fff; padding: 30px 40px; border-radius: 5px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1); 
            background-image: 
                linear-gradient(rgba(200, 200, 200, 0.2) 1px, transparent 1px),
                linear-gradient(90deg, transparent 95%, rgba(255, 182, 193, 0.2) 95%);
            background-size: 100% 2em, 100% 100%;
            background-color: #fffdf9;
            border: 1px solid #e0e0e0;
            touch-action: pan-y; text-align: left;
            position: relative;
        }
        .long-letter-container::before {
            content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%) rotate(-2deg);
            width: 120px; height: 35px; background-color: rgba(255, 160, 122, 0.7); z-index: 1; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .big-number-container { text-align: center; margin-bottom: 20px; border-bottom: 2px dashed var(--secondary); padding-bottom: 20px; }
        .big-number { font-size: 5rem; font-family: 'Fredoka One'; color: var(--deep-pink); line-height: 1; text-shadow: 3px 3px var(--secondary); display: inline-block; }
        .big-number span { font-size: 1.5rem; color: var(--text); display: block; margin-top: -5px; }
        .long-letter-text { font-family: 'Indie Flower', cursive; font-size: 1.3rem; line-height: 2em; color: #444; white-space: pre-wrap; padding-top: 10px; }
        .deco-sticker-tl { position: absolute; top: 10px; left: 10px; font-size: 2rem; opacity: 0.9; transform: rotate(-15deg); }
        .deco-sticker-br { position: absolute; bottom: 10px; right: 10px; font-size: 2rem; opacity: 0.9; transform: rotate(15deg); }

        .letter-photo-frame {
            width: 220px; height: auto; margin: 0 auto 25px auto;
            background: #fff; padding: 10px 10px 40px 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            transform: rotate(3deg); position: relative;
        }
        .letter-photo-frame img { width: 100%; border-radius: 5px; }
        .letter-photo-frame::before {
            content: ''; position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
            width: 80px; height: 25px; background: rgba(255, 182, 193, 0.8); opacity: 0.9;
        }

        .modal-base {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8);
            display: flex; justify-content: center; align-items: center; z-index: 200; opacity: 0; pointer-events: none; transition: opacity 0.5s;
        }
        .modal-base.active { opacity: 1; pointer-events: all; }
        
        .polaroid-content {
            background: #fff; padding: 20px 20px 70px 20px; transform: rotate(-2deg);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); text-align: center; position: relative; max-width: 320px;
        }
        .polaroid-content::before {
            content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 30px; background: rgba(255, 107, 129, 0.5);
        }
        .polaroid-content img { width: 100%; height: auto; border: 1px solid #eee; filter: contrast(1.1) saturate(1.1); }
        .polaroid-caption { font-family: 'Indie Flower', cursive; font-size: 1.8rem; margin-top: 20px; color: #333; font-weight: bold; transform: rotate(-1deg); }

        .gallery-modal-content { background: #fff; padding: 15px; border-radius: 15px; max-width: 90%; max-height: 80vh; text-align: center; position: relative; }
        .gallery-modal-content img { max-width: 100%; max-height: 60vh; border-radius: 10px; object-fit: contain; }
        .gallery-caption { margin-top: 15px; font-family: 'Nunito'; font-weight: 700; color: var(--text); font-size: 1.1rem; }
        .close-btn {
            position: absolute; top: -15px; right: -15px; width: 35px; height: 35px;
            background: var(--deep-pink); color: #fff; border-radius: 50%;
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            font-weight: bold; box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }

        .wishes-complete-content {
            background: #fff; padding: 40px; border-radius: 20px; text-align: center; max-width: 80%;
            box-shadow: 0 15px 30px rgba(255, 105, 180, 0.3); animation: pulse-beat 2s infinite;
        }

        .kiss-particle { position: absolute; font-size: 3rem; pointer-events: none; animation: float-kiss 4s ease-in forwards; z-index: 999; }

        .cute-music-btn {
            position: fixed; top: 20px; right: 20px; width: 50px; height: 50px;
            background: #fff; border-radius: 50%; box-shadow: 0 5px 15px rgba(255, 107, 129, 0.4);
            display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 100; color: var(--deep-pink);
            border: 3px solid var(--secondary); animation: pulse-beat 2s infinite; transition: transform 0.3s;
        }
        .cute-music-btn:hover { transform: scale(1.1) rotate(15deg); }
        .cute-music-btn.playing { animation: spin 5s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        .deco-emoji { position: absolute; font-size: 3rem; animation: float-up 3s infinite; }
        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 99; }
        .hidden { display: none !important; }
        .nav-btn {
            position: fixed; bottom: 30px; right: 30px; background: linear-gradient(45deg, var(--deep-pink), var(--primary)); color: #fff;
            width: 60px; height: 60px; border-radius: 50%; display: flex; justify-content: center; align-items: center;
            box-shadow: 0 8px 20px rgba(255, 107, 129, 0.5); cursor: pointer; z-index: 50; border: none; transition: transform 0.3s;
        }
        .nav-btn:hover { transform: scale(1.1); }

    </style>
</head>
<body>

    <!-- Background Elements Container -->
    <div class="bg-floater-container">
        <!-- 4 Middle Floaters (Restricted) -->
        <div class="bg-floater-mid">‚ú®</div>
        <div class="bg-floater-mid">üíñ</div>
        <div class="bg-floater-mid">üå∏</div>
        <div class="bg-floater-mid">üíå</div>

        <!-- 15+ Bottom Floaters (Fade out at 1/6 height) -->
        <div class="bg-floater-bottom">‚ù§Ô∏è</div>
        <div class="bg-floater-bottom">‚ú®</div>
        <div class="bg-floater-bottom">ü¶ã</div>
        <div class="bg-floater-bottom">üå∏</div>
        <div class="bg-floater-bottom">üéÄ</div>
        <div class="bg-floater-bottom">üå∑</div>
        <div class="bg-floater-bottom">üíï</div>
        <div class="bg-floater-bottom">üíû</div>
        <div class="bg-floater-bottom">üíì</div>
        <div class="bg-floater-bottom">üíó</div>
        <div class="bg-floater-bottom">üíò</div>
        <div class="bg-floater-bottom">üíù</div>
        <div class="bg-floater-bottom">üíê</div>
        <div class="bg-floater-bottom">üåπ</div>
        <div class="bg-floater-bottom">üåª</div>
        <div class="bg-floater-bottom">üåº</div>
        <div class="bg-floater-bottom">ü•∞</div>
    </div>
    
    <!-- Butterfly Element -->
    <div class="butterfly">ü¶ã</div>

    <!-- AUDIO -->
    <audio id="bg-music" loop>
        <source src="https://github.com/undangandigitalku/laguundangan/raw/refs/heads/main/English%20-%20A%20Thousand%20Years%20Real.mp3" type="audio/mpeg">
    </audio>
    <div class="cute-music-btn" onclick="toggleMusic()">
        <i data-lucide="music"></i>
    </div>

    <!-- CANVAS CONFETTI -->
    <canvas id="confetti-canvas"></canvas>

    <!-- SECTION 1: COVER -->
    <section class="slide-container active" id="section-1">
        <div class="cover-frame">
            <img src="https://images.unsplash.com/photo-1524250502761-1ac6f2e30d43?q=80&w=800&auto=format&fit=crop" alt="Her">
            <div class="sticker" style="top: -10px; right: -10px;">üéÄ</div>
        </div>
        <h1>Happy 26th!</h1>
        <p class="sub-title">11 Januari 2026</p>
        <button class="btn-main" onclick="delayedNext(2)">
            Open Surprise <i data-lucide="heart"></i>
        </button>
    </section>

    <!-- SECTION 2: ENVELOPE -->
    <section class="slide-container" id="section-2">
        <h2 style="font-family: 'Pacifico'; color: var(--deep-pink); margin-bottom: 30px;">For My Love...</h2>
        <div class="envelope-wrapper" onclick="openEnvelope()">
            <div class="envelope-flap"></div>
            <div class="envelope-paper">Open Me!</div>
        </div>
    </section>

    <!-- SECTION 3: LETTER -->
    <section class="slide-container" id="section-3">
        <div class="letter-paper">
            <div class="sticker" style="top: -20px; right: -10px;">üß∏</div>
            <div class="letter-content">
                <h2>Dear, My Love... üíå</h2>
                <p>
                    Happy 26th Birthday, Sayang! ‚ú®<br><br>
                    Terima kasih sudah lahir ke dunia dan jadi bagian terindah dalam hidupku.
                    Aku bangga banget sama semua pencapaian kamu. Semoga tahun ini penuh tawa, cinta, dan rezeki yang melimpah.<br><br>
                    <i>I Love You so much!</i> ‚ù§Ô∏è
                </p>
            </div>
        </div>
        <button class="btn-main" style="margin-top: 30px;" onclick="delayedNext(4)">
            Next <i data-lucide="arrow-right"></i>
        </button>
    </section>

    <!-- SECTION 4: CAKE -->
    <section class="slide-container" id="section-4">
        <h2 style="font-family: 'Fredoka One'; color: var(--deep-pink); margin-bottom: 40px;">Make a Wish! üéÇ</h2>
        <div class="cake-wrapper" id="cake-box" onclick="cutCake()">
            <div class="knife">üî™</div>
            <div class="candle"><div class="flame"></div></div>
            <div class="cake-body">
                <div class="cake-half left"><div class="icing"></div><div class="strawberry"></div></div>
                <div class="cake-half right"><div class="icing"></div><div class="strawberry"></div></div>
            </div>
        </div>
        <p class="cut-instruction" id="cut-text">Tap to Cut the Cake!</p>
        <button class="btn-main hidden" id="after-cut-btn" onclick="delayedNext(5)">
            Yummy! Next <i data-lucide="arrow-right"></i>
        </button>
    </section>

    <!-- SECTION 5: SPECIAL WISH -->
    <section class="slide-container" id="section-5">
        <h2 style="margin-bottom: 20px; color: var(--deep-pink); font-family: 'Fredoka One';">One Special Wish... üíñ</h2>
        <p style="margin-bottom: 30px; font-size: 1.1rem; color: #666; text-align: center;">Tutup matamu sejenak, dan ucapkan harapan terbesarmu...</p>
        <div class="special-photo-container">
            <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=1000&auto=format&fit=crop" alt="Your Wish">
        </div>
        
        <div class="floating-elements">
            <div class="falling-star" style="left:10%; animation-delay:0s;">üåü</div>
            <div class="falling-star" style="left:85%; animation-delay:1.5s;">üåü</div>
            <div class="rising-heart" style="left:20%; animation-delay:0.5s;">‚ù§Ô∏è</div>
            <div class="rising-heart" style="left:70%; animation-delay:2.5s;">üíñ</div>
        </div>

        <button class="btn-main" style="margin-top: 30px;" onclick="showPolaroidSurprise()">
            <i data-lucide="heart"></i> I've made my wish
        </button>
    </section>

    <!-- SECTION 6: GALLERY -->
    <section class="slide-container" id="section-6">
        <h2 style="font-family: 'Fredoka One'; color: var(--deep-pink); margin-bottom: 10px;">Our Cute Moments üì∏</h2>
        <div class="gallery-hint">Tap photo to see detail! üëá</div>
        
        <div class="gallery-container">
            <div class="gallery-item" onclick="showGalleryModal('https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?q=80&w=687&auto=format&fit=crop', 'Sweet memory 1')"><img src="https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?q=80&w=687&auto=format&fit=crop"></div>
            <div class="gallery-item" onclick="showGalleryModal('https://images.unsplash.com/photo-1621112904887-419379ce6824?q=80&w=1744&auto=format&fit=crop', 'Sweet memory 2')"><img src="https://images.unsplash.com/photo-1621112904887-419379ce6824?q=80&w=1744&auto=format&fit=crop"></div>
            <div class="gallery-item" onclick="showGalleryModal('https://images.unsplash.com/photo-1523438097201-512ae7d59c44?q=80&w=687&auto=format&fit=crop', 'Sweet memory 3')"><img src="https://images.unsplash.com/photo-1523438097201-512ae7d59c44?q=80&w=687&auto=format&fit=crop"></div>
            <div class="gallery-item" onclick="showGalleryModal('https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?q=80&w=1738&auto=format&fit=crop', 'Sweet memory 4')"><img src="https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?q=80&w=1738&auto=format&fit=crop"></div>
            <div class="gallery-item" onclick="showGalleryModal('https://images.unsplash.com/photo-1542596594-649edbc13630?q=80&w=800&auto=format&fit=crop', 'Sweet memory 5')"><img src="https://images.unsplash.com/photo-1542596594-649edbc13630?q=80&w=800&auto=format&fit=crop"></div>
            <div class="gallery-item" onclick="showGalleryModal('https://images.unsplash.com/photo-1517263904808-5dc8b43b1c3f?q=80&w=800&auto=format&fit=crop', 'Sweet memory 6')"><img src="https://images.unsplash.com/photo-1517263904808-5dc8b43b1c3f?q=80&w=800&auto=format&fit=crop"></div>
        </div>

        <button class="nav-btn" onclick="delayedNext(7)">
            <i data-lucide="chevron-right"></i>
        </button>
    </section>

    <!-- SECTION 7: WISHES (FLIP CARDS) -->
    <section class="slide-container" id="section-7">
        <h2 style="font-family: 'Fredoka One'; color: var(--deep-pink); margin-bottom: 20px;">My Wishes for You ‚ú®</h2>
        <p style="margin-bottom: 20px; font-size: 0.9rem;">Tap all cards to reveal!</p>
        
        <div class="wishes-container">
            <div class="flip-card" onclick="flipCard(this)">
                <div class="flip-card-inner">
                    <div class="flip-card-front"><img src="https://images.unsplash.com/photo-1506126613408-eca07ce68773?q=80&w=800&auto=format&fit=crop"><div class="flip-card-overlay"><div class="flip-card-title"><i data-lucide="heart"></i> Health</div></div></div>
                    <div class="flip-card-back">Semoga kamu sehat selalu, panjang umur, dan dijauhkan dari segala penyakit. Aamiin! üí™</div>
                </div>
            </div>
            <div class="flip-card" onclick="flipCard(this)">
                <div class="flip-card-inner">
                    <div class="flip-card-front"><img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?q=80&w=800&auto=format&fit=crop"><div class="flip-card-overlay"><div class="flip-card-title"><i data-lucide="briefcase"></i> Career</div></div></div>
                    <div class="flip-card-back">Semoga karirmu makin cemerlang, rezeki lancar, dan semua target tercapai tahun ini! üöÄ</div>
                </div>
            </div>
            <div class="flip-card" onclick="flipCard(this)">
                <div class="flip-card-inner">
                    <div class="flip-card-front"><img src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=800&auto=format&fit=crop"><div class="flip-card-overlay"><div class="flip-card-title"><i data-lucide="smile"></i> Us</div></div></div>
                    <div class="flip-card-back">Semoga kita makin langgeng, saling mengerti, dan bahagia selamanya. Love you! ‚ù§Ô∏è</div>
                </div>
            </div>
        </div>
        
        <div class="wishes-progress-container">
            <div class="wishes-progress-bar" id="wishesProgressBar"></div>
        </div>
        <div style="text-align:center; margin-top:5px; font-size:0.8rem; color:#888;">Progress: <span id="wishesCount">0</span>/3</div>
    </section>

    <!-- SECTION 8: LONG LETTER -->
    <section class="slide-container" id="section-8">
        <div class="long-letter-container">
            <div class="deco-sticker-tl">üìå</div>
            <div class="deco-sticker-br">üíñ</div>
            <div class="big-number-container">
                <div class="big-number">26<span>Years Loved!</span></div>
            </div>
            <div class="long-letter-text">
Dear Sayangku,

Selamat ulang tahun yang ke-26! üéâ
Di usia yang baru ini, aku cuma mau bilang betapa bersyukurnya aku punya kamu. Kamu adalah alasan di balik banyak senyumku setiap hari.

Terima kasih sudah jadi orang yang kuat, sabar, dan penuh kasih sayang. Aku tau hidup ga selalu mudah, tapi aku janji bakal selalu ada di samping kamu, dukung kamu, dan genggam tangan kamu di setiap langkah.

Semoga semua mimpi-mimpi kamu yang belum terwujud, bisa segera jadi kenyataan tahun ini. Tetap jadi diri kamu yang luar biasa ya.

I love you more than words can say. Happy Birthday, my favorite person! ‚ù§Ô∏è

Yours,
[Nama Kamu]
            </div>
            <button class="btn-main" style="margin-top: 30px; width: 100%; justify-content: center;" onclick="delayedNext(9)">
                Seal the Letter <i data-lucide="mail"></i>
            </button>
        </div>
    </section>

    <!-- SECTION 9: FINAL -->
    <section class="slide-container" id="section-9">
        <div class="letter-photo-frame">
            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=800&auto=format&fit=crop" alt="My Love">
        </div>
        <h2 style="margin-top: 30px; color: var(--deep-pink);">Happy Birthday!</h2>
        <p style="margin-top: 15px; font-size: 1.2rem; font-weight: 600;">Sending you tons of love & kisses!</p>
        <div style="margin-top: 40px;">
            <button class="btn-main" onclick="sendKisses()">
                Send Birthday Kisses üíã
            </button>
        </div>
        <div style="margin-top: 20px;">
            <button class="btn-main" style="background: var(--text); font-size: 0.9rem;" onclick="location.reload()">
                <i data-lucide="rotate-ccw"></i> Replay Surprise
            </button>
        </div>
    </section>

    <!-- MODALS -->
    
    <!-- Gallery Modal -->
    <div class="modal-base gallery-modal" id="galleryModal">
        <div class="gallery-modal-content">
            <div class="close-btn" onclick="closeGalleryModal()">X</div>
            <img id="modalImg" src="" alt="">
            <div class="gallery-caption" id="modalCaption"></div>
        </div>
    </div>

    <!-- Polaroid Modal (Popup) -->
    <div class="modal-base polaroid-modal" id="polaroidModal">
        <div class="polaroid-content">
            <img src="https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?q=80&w=1000&auto=format&fit=crop" alt="">
            <div class="polaroid-caption">May it come true! ‚ú®</div>
            <button class="btn-main" style="margin-top: 20px;" onclick="closePolaroidAndNext()">Amiin & Continue <i data-lucide="arrow-right"></i></button>
        </div>
        <div class="deco-emoji" style="top: 15%; left: 10%;">üß∏</div>
        <div class="deco-emoji" style="bottom: 15%; right: 10%;">üéÄ</div>
        <div class="deco-emoji" style="top: 50%; right: 5%; animation-delay: 1s;">üíñ</div>
    </div>

    <!-- Final Letter Prompt Modal -->
    <div class="modal-base" id="finalLetterModal">
        <div class="wishes-complete-content">
            <h2 style="color: var(--deep-pink); font-family: 'Fredoka One';">All Wishes Unlocked! üîì</h2>
            <p style="margin: 15px 0; font-size: 1.1rem;">There is one last letter waiting for you...</p>
            <button class="btn-main" onclick="openFinalLetterSlide()">
                Open Final Letter <i data-lucide="mail-open"></i>
            </button>
        </div>
    </div>

    <script>
        lucide.createIcons();

        const music = document.getElementById('bg-music');
        const musicBtn = document.querySelector('.cute-music-btn');
        function toggleMusic() {
            if (music.paused) {
                music.play();
                musicBtn.classList.add('playing');
            } else {
                music.pause();
                musicBtn.classList.remove('playing');
            }
        }

        function delayedNext(id) {
            fireConfetti(); 
            const current = document.querySelector('.slide-container.active');
            current.classList.remove('active');
            current.classList.add('exit');

            setTimeout(() => {
                const next = document.getElementById('section-' + id);
                next.classList.remove('exit');
                void next.offsetWidth; 
                next.classList.add('active');
                
                if (id === 2 && music.paused) {
                    music.play().catch(e => console.log("Audio restricted"));
                    musicBtn.classList.add('playing');
                }
            }, 600);
        }

        function openEnvelope() {
            document.querySelector('.envelope-wrapper').classList.add('open');
            setTimeout(() => delayedNext(3), 1500);
        }

        let isCakeCut = false;
        function cutCake() {
            if(isCakeCut) return;
            isCakeCut = true;
            document.getElementById('cake-box').classList.add('cut');
            document.getElementById('cut-text').innerText = "Yummy! üéâ";
            fireConfetti();
            setTimeout(() => {
                document.getElementById('after-cut-btn').classList.remove('hidden');
            }, 1000);
        }

        function showGalleryModal(src, caption) {
            document.getElementById('modalImg').src = src;
            document.getElementById('modalCaption').innerText = caption;
            document.getElementById('galleryModal').classList.add('active');
        }
        function closeGalleryModal() {
            document.getElementById('galleryModal').classList.remove('active');
        }

        let flippedCount = 0;
        function flipCard(card) {
            if(!card.classList.contains('flipped')) {
                card.classList.add('flipped');
                flippedCount++;
                
                document.getElementById('wishesCount').innerText = flippedCount;
                document.getElementById('wishesProgressBar').style.width = (flippedCount / 3 * 100) + '%';

                if(flippedCount === 3) {
                    setTimeout(() => {
                        document.getElementById('finalLetterModal').classList.add('active');
                        fireConfetti();
                    }, 3000);
                }
            }
        }

        function openFinalLetterSlide() {
            document.getElementById('finalLetterModal').classList.remove('active');
            delayedNext(8);
        }

        function showPolaroidSurprise() {
            fireConfetti();
            document.getElementById('polaroidModal').classList.add('active');
        }
        function closePolaroidAndNext() {
            document.getElementById('polaroidModal').classList.remove('active');
            delayedNext(6);
        }

        function sendKisses() {
            for (let i = 0; i < 30; i++) {
                createKiss();
            }
        }

        function createKiss() {
            const kiss = document.createElement('div');
            kiss.innerHTML = 'üíã';
            kiss.classList.add('kiss-particle');
            kiss.style.left = Math.random() * 100 + 'vw';
            kiss.style.top = (100 + Math.random() * 20) + 'vh';
            kiss.style.animationDuration = (3 + Math.random() * 2) + 's';
            kiss.style.fontSize = (2 + Math.random() * 2) + 'rem';
            document.body.appendChild(kiss);

            setTimeout(() => {
                kiss.remove();
            }, 5000);
        }

        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        let particles = [];
        const colors = ['#ff9a9e', '#fbc2eb', '#fad0c4', '#a18cd1', '#84fab0'];

        function fireConfetti() {
            for(let i=0; i<30; i++) {
                particles.push({
                    x: window.innerWidth / 2, 
                    y: window.innerHeight / 2,
                    vx: (Math.random() - 0.5) * 10, 
                    vy: (Math.random() - 0.5) * 10,
                    size: Math.random() * 5 + 2, 
                    color: colors[Math.floor(Math.random() * colors.length)],
                    life: 80,
                    alpha: 1
                });
            }
            if(!animating) animate();
        }

        let animating = false;
        function animate() {
            animating = true;
            ctx.clearRect(0, 0, canvas.width, canvas.height); 
            
            particles = particles.filter(p => p.life > 0 && p.alpha > 0);

            for(let i=0; i<particles.length; i++) {
                let p = particles[i];
                p.x += p.vx; 
                p.y += p.vy; 
                p.vy += 0.15; 
                p.life--;
                p.alpha -= 0.015; 
                
                ctx.globalAlpha = Math.max(0, p.alpha);
                ctx.fillStyle = p.color; 
                ctx.beginPath(); 
                ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); 
                ctx.fill();
            }
            ctx.globalAlpha = 1;

            if(particles.length > 0) {
                requestAnimationFrame(animate);
            } else {
                animating = false;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        }
        
        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
    </script>
</body>
</html>
